module.exports=[9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},60350,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23700),e=a.i(20331);a.i(69387);var f=a.i(60574);a.i(30485);var g=a.i(31052),h=a.i(50944);function i(){return new Date().toISOString().split("T")[0]}function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)({}),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)("signup"),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(0),O=(0,h.useRouter)();(0,c.useEffect)(()=>(C?document.body.classList.remove("no-scroll"):document.body.classList.add("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[C]),(0,c.useEffect)(()=>{(async()=>{if(!s)return n(!1);let a=(0,f.doc)(e.db,"users",s.uid),b=await (0,f.getDoc)(a),c=i();if(b.exists()){let a=b.data();if(!a.isProfileComplete)return O.push("/profile");if(a.groupFull&&a.groupFull.date===c){L(!0),n(!1);return}if(a.dailyGroup&&a.dailyGroup.date===c)return O.push(`/group/${a.dailyGroup.groupId}`)}n(!1)})()},[s,O]),(0,c.useEffect)(()=>{m||(async()=>{try{p(!0);let a=(0,f.doc)(e.db,"config","daily"),b=await (0,f.getDoc)(a);if(b.exists()){let a=b.data();a.date===i()?(j(a.questions||[]),N(0)):r("Questions for today are not ready yet. Check back soon!")}else r("Questions for today are not ready yet. Check back soon!")}catch(a){console.error(a),r("Failed to load questions. Please try refreshing.")}finally{p(!1)}})()},[m]),(0,c.useEffect)(()=>(document.body.classList.add("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[]);let P=async(b,c)=>{let d={...k,[b]:c};if(l(d),b===a.length-1){let b=a.map((a,b)=>"yes"===d[b]?"1":"0").join("");if(v(b),s){let a=await T(s,b,d);if("full"===a)L(!0);else if("success"===a){let a=(await (0,f.getDoc)((0,f.doc)(e.db,"users",s.uid))).data();D(!1),a?.isProfileComplete?O.push(`/group/${b}`):O.push("/profile")}}else D(!0)}else N(a=>a+1)},Q=async a=>{if(!w||!y)return void H("Please enter email and password.");if(a&&y!==A)return void H("Passwords do not match.");H(null);try{let b;a?(b=await (0,g.createUserWithEmailAndPassword)(e.auth,w,y),await (0,g.sendEmailVerification)(b.user)):b=await (0,g.signInWithEmailAndPassword)(e.auth,w,y);let c=b.user,d=i(),h=(0,f.doc)(e.db,"users",c.uid),j=await (0,f.getDoc)(h),l=j.exists()?j.data():null;if(l){if(l.groupFull&&l.groupFull.date===d){D(!1),L(!0);return}if(l.dailyGroup&&l.dailyGroup.date===d)return void D(!1)}if(a&&(await (0,f.setDoc)(h,{email:c.email,isProfileComplete:!1,username:c.email?.split("@")[0]||`user${Date.now()}`},{merge:!0}),l=(await (0,f.getDoc)(h)).data()||null),u){let a=await T(c,u,k);"full"===a?(D(!1),L(!0)):"success"===a&&(D(!1),l?.isProfileComplete?O.push(`/group/${u}`):O.push("/profile"))}else O.refresh()}catch(a){console.error("Auth error:",a),"auth/email-already-in-use"===a.code?H("This email is already in use."):"auth/weak-password"===a.code?H("Password must be at least 6 characters."):"auth/invalid-email"===a.code?H("Please enter a valid email address."):"auth/invalid-credential"===a.code?H("Invalid email or password."):H("An error occurred. Please try again.")}},R=async()=>{H(null);let a=new g.GoogleAuthProvider;try{let b=(await (0,g.signInWithPopup)(e.auth,a)).user,c=i(),d=(0,f.doc)(e.db,"users",b.uid),h=await (0,f.getDoc)(d),j=h.exists()?h.data():null;if(h.exists()||(j={email:b.email,isProfileComplete:!1,username:b.displayName||b.email?.split("@")[0]||`user${Date.now()}`,profilePictureUrl:b.photoURL||null},await (0,f.setDoc)(d,j,{merge:!0})),j){if(j.groupFull&&j.groupFull.date===c){D(!1),L(!0);return}if(j.dailyGroup&&j.dailyGroup.date===c)return void O.push(`/group/${j.dailyGroup.groupId}`)}if(u){let a=await T(b,u,k);"full"===a?(D(!1),L(!0)):"success"===a&&(D(!1),j?.isProfileComplete?O.push(`/group/${u}`):O.push("/profile"))}else O.refresh()}catch(a){console.error("Google join error:",a),H("Failed to sign in with Google.")}},S=async()=>{try{await (0,g.signOut)(e.auth)}catch(a){console.error("Failed to sign out:",a),r("Failed to sign out.")}},T=async(b,c,d)=>{if(!b||!c)return"success";let g=i(),h=(0,f.doc)(e.db,"users",b.uid);try{return await (0,f.runTransaction)(e.db,async i=>{let j=(0,f.doc)(e.db,`daily_groups/${g}/groups`,c),k=await i.get(j),l=[];if(k.exists()&&(l=k.data().members||[]),l.length>=10&&!l.includes(b.uid))return i.set(h,{groupFull:{date:g}},{merge:!0}),"full";let m=a.map((a,b)=>d[b]);return i.set(j,{members:(0,f.arrayUnion)(b.uid)},{merge:!0}),i.set(h,{dailyGroup:{date:g,groupId:c,answers:m},groupFull:(0,f.deleteField)()},{merge:!0}),"success"})}catch(a){return console.error("Failed to assign group with transaction:",a),r("Error joining group. Please try again."),"success"}};return m||o?(0,b.jsx)("main",{className:"loading-container",children:(0,b.jsx)("p",{children:"Loading today's questions..."})}):(0,b.jsxs)("main",{children:[(0,b.jsx)(d.default,{children:(0,b.jsx)("title",{children:"Brillianse - Daily Questions"})}),!s&&!C&&(0,b.jsx)("div",{className:"header-actions",children:(0,b.jsx)("button",{className:"btn-sign-in-header",onClick:()=>{H(null),x(""),z(""),J(!0),B(""),F("login"),D(!0)},children:"Sign In"})}),C&&(0,b.jsx)("div",{className:"auth-container",children:"signup"===E?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("h2",{children:["You're in Group ",u,"!"]}),(0,b.jsx)("p",{children:"Sign up to see your group members."}),(0,b.jsxs)("div",{className:"auth-form",children:[(0,b.jsx)("input",{type:"email",value:w,onChange:a=>x(a.target.value),placeholder:"Email"}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),placeholder:"Password"}),(0,b.jsx)("input",{type:"password",value:A,onChange:a=>B(a.target.value),placeholder:"Confirm Password"}),(0,b.jsx)("button",{onClick:R,className:"btn-google",children:"Continue with Google"}),(0,b.jsx)("button",{onClick:()=>Q(!0),className:"btn-primary",children:"Sign Up"}),G&&(0,b.jsx)("p",{className:"auth-error",children:G})]}),(0,b.jsxs)("p",{className:"auth-toggle-link",children:["Already have an account? ",(0,b.jsx)("span",{onClick:()=>{F("login"),H(null)},children:"Log In"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h2",{children:"Log In"}),(0,b.jsx)("p",{children:"Log in to see your group members."}),(0,b.jsxs)("div",{className:"auth-form",children:[(0,b.jsx)("input",{type:"email",value:w,onChange:a=>x(a.target.value),placeholder:"Email"}),(0,b.jsx)("input",{type:"password",value:y,onChange:a=>z(a.target.value),placeholder:"Password"}),(0,b.jsx)("button",{onClick:R,className:"btn-google",children:"Continue with Google"}),(0,b.jsx)("button",{onClick:()=>Q(!1),className:"btn-primary",children:"Log In with Email"}),G&&(0,b.jsx)("p",{className:"auth-error",children:G})]}),(0,b.jsxs)("p",{className:"auth-toggle-link",children:["Don't have an account? ",(0,b.jsx)("span",{onClick:()=>{F("signup"),H(null)},children:"Sign Up"})]})]})}),K&&(0,b.jsx)("div",{className:"sign-out-modal-overlay",children:(0,b.jsxs)("div",{className:"sign-out-modal-content",children:[(0,b.jsx)("h2",{children:"Group Full"}),(0,b.jsx)("p",{children:"This group already has 10 members. Please check back tomorrow!"}),(0,b.jsx)("div",{className:"modal-actions",children:(0,b.jsx)("button",{onClick:S,className:"btn-secondary",children:"Sign Out"})})]})}),q&&(0,b.jsxs)("div",{className:"error-container",children:[(0,b.jsx)("h2",{children:"No Questions Yet"}),(0,b.jsx)("p",{children:q}),(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-secondary",style:{marginTop:"1rem"},children:"Refresh"})]}),a.length>0&&!C&&!q&&(0,b.jsxs)("div",{className:"question-form",children:[(0,b.jsx)("div",{className:"progress-indicator",children:(0,b.jsx)("div",{className:"progress-dots-container",children:a.map((a,c)=>(0,b.jsx)("div",{className:`
                    progress-dot 
                    ${c===M?"active":""}
                    ${c<M?"completed":""}
                  `},c))})}),(0,b.jsxs)("div",{className:"question-block",children:[(0,b.jsx)("div",{className:"question-nav-header",children:M>0&&(0,b.jsx)("button",{onClick:()=>{M>0&&N(a=>a-1)},className:"btn-back-question",children:(0,b.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/brillianse-801f7.firebasestorage.app/o/Arrow%203%20(1).png?alt=media&token=543fa238-2ab7-4906-b2c3-8d5610d9119c",alt:"Back"})})}),(0,b.jsx)("p",{className:"question-text",children:a[M]}),(0,b.jsxs)("div",{className:"button-group",children:[(0,b.jsx)("button",{type:"button",className:`btn-answer ${"yes"===k[M]?"selected":""}`,onClick:()=>P(M,"yes"),children:"Yes"}),(0,b.jsx)("button",{type:"button",className:`btn-answer ${"no"===k[M]?"selected":""}`,onClick:()=>P(M,"no"),children:"No"})]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6baec264._.js.map