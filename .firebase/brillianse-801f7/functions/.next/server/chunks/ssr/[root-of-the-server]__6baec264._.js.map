{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { db, auth } from '../lib/firebase';\nimport { doc, getDoc, setDoc, arrayUnion, runTransaction, deleteField } from 'firebase/firestore';\nimport {\n  onAuthStateChanged,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  User,\n  signOut,\n  sendEmailVerification,\n  signInWithPopup,\n  GoogleAuthProvider\n} from 'firebase/auth';\nimport { useRouter } from 'next/navigation';\n\nfunction getTodayDate() {\n  return new Date().toISOString().split('T')[0];\n}\n\nexport default function Home() {\n  const [questions, setQuestions] = useState<string[]>([]);\n  const [answers, setAnswers] = useState<{ [key: number]: string }>({});\n  \n  const [isCheckingUser, setIsCheckingUser] = useState(true);\n  const [isFetchingQuestions, setIsFetchingQuestions] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  const [user, setUser] = useState<User | null>(null);\n  const [groupId, setGroupId] = useState<string | null>(null);\n  \n  // --- Auth State ---\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [showAuthForm, setShowAuthForm] = useState(false);\n  const [authMode, setAuthMode] = useState<'signup' | 'login'>('signup');\n  const [authError, setAuthError] = useState<string | null>(null);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [showGroupFullModal, setShowGroupFullModal] = useState(false);\n  \n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  \n  const router = useRouter();\n\n  const resetQuestionState = () => {\n    setAnswers({});\n    setCurrentQuestionIndex(0);\n    setGroupId(null);\n    setShowAuthForm(false);\n    setShowGroupFullModal(false);\n    setError(null);\n    setAuthError(null);\n    setConfirmPassword('');\n    setAuthMode('signup');\n  };\n\n  // --- 1. Listen for user auth changes ---\n  // --- 1. Listen for user auth changes ---\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      \n      // If no user is found, we are done checking. \n      // If a user IS found, the \"Check if user has already played\" effect will handle the loading state.\n      if (!currentUser) {\n        setIsCheckingUser(false);\n      }\n    });\n\n    // Cleanup subscription on unmount\n    return () => unsubscribe();\n  }, []);\n\n  // --- 1.5 Handle Body Scroll (Separate Effect) ---\n  useEffect(() => {\n    if (showAuthForm) {\n      document.body.classList.remove('no-scroll');\n    } else {\n      document.body.classList.add('no-scroll');\n    }\n    return () => document.body.classList.remove('no-scroll');\n  }, [showAuthForm]);\n\n  // --- 2. Check if user has already played ---\n  useEffect(() => {\n    const checkUserStatus = async () => {\n      // If no user, stop checking user status\n      if (!user) {\n        setIsCheckingUser(false);\n        return;\n      }\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n      const today = getTodayDate();\n\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n\n        if (!userData.isProfileComplete) {\n          router.push('/profile');\n          return; \n        }\n\n        if (userData.groupFull && userData.groupFull.date === today) {\n          setShowGroupFullModal(true); \n          setIsCheckingUser(false);    \n          return;                     \n        }\n        \n        if (userData.dailyGroup && userData.dailyGroup.date === today) {\n          router.push(`/group/${userData.dailyGroup.groupId}`);\n          return;\n        }\n      }\n    \n      setIsCheckingUser(false); \n    };\n    checkUserStatus();\n  }, [user, router]);\n\n  // --- 3. Fetch daily questions ---\n  useEffect(() => {\n    // Only fetch after we've confirmed user status\n    if (isCheckingUser) return;\n\n    const fetchQuestions = async () => {\n      try {\n        setIsFetchingQuestions(true);\n        const docRef = doc(db, 'config', 'daily');\n        const docSnap = await getDoc(docRef);\n        \n        if (docSnap.exists()) {\n          const data = docSnap.data();\n          // Check if the date matches today\n          if (data.date === getTodayDate()) {\n            setQuestions(data.questions || []);\n            setCurrentQuestionIndex(0); \n          } else {\n            // Data exists but it's old\n            setError('Questions for today are not ready yet. Check back soon!');\n          }\n        } else {\n          // Document doesn't exist at all\n          setError('Questions for today are not ready yet. Check back soon!');\n        }\n      } catch (err) {\n        console.error(err);\n        setError('Failed to load questions. Please try refreshing.');\n      } finally {\n        setIsFetchingQuestions(false);\n      }\n    };\n    fetchQuestions();\n  }, [isCheckingUser]);\n\n  useEffect(() => {\n    document.body.classList.add('no-scroll');\n    return () => {\n      document.body.classList.remove('no-scroll');\n    };\n  }, []);\n\n  const handleAnswer = async (questionIndex: number, answer: string) => {\n    const newAnswers = { ...answers, [questionIndex]: answer };\n    setAnswers(newAnswers);\n\n    if (questionIndex === questions.length - 1) {\n      const finalGroupId = questions.map((_, index) => newAnswers[index] === 'yes' ? '1' : '0').join('');\n      setGroupId(finalGroupId);\n\n      if (user) {\n        const status = await assignUserToGroup(user, finalGroupId, newAnswers);\n        if (status === 'full') {\n          setShowGroupFullModal(true);\n        } else if (status === 'success') {\n          const userSnap = await getDoc(doc(db, 'users', user.uid));\n          const userData = userSnap.data();\n          setShowAuthForm(false);\n          if (userData?.isProfileComplete) {\n            router.push(`/group/${finalGroupId}`);\n          } else {\n            router.push(`/profile`);\n          }\n        }\n      } else {\n        setShowAuthForm(true);\n      }\n    } else {\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  };\n\n  const handleAuth = async (isSigningUp: boolean) => {\n    if (!email || !password) {\n      setAuthError('Please enter email and password.');\n      return;\n    }\n    if (isSigningUp && password !== confirmPassword) {\n      setAuthError('Passwords do not match.');\n      return;\n    }\n    setAuthError(null);\n    try {\n      let userCredential;\n      if (isSigningUp) {\n        userCredential = await createUserWithEmailAndPassword(auth, email, password);\n        await sendEmailVerification(userCredential.user);\n      } else {\n        userCredential = await signInWithEmailAndPassword(auth, email, password);\n      }\n      \n      const loggedInUser = userCredential.user;\n      const today = getTodayDate();\n      const userRef = doc(db, 'users', loggedInUser.uid);\n      \n      const userSnap = await getDoc(userRef);\n      let userData = userSnap.exists() ? userSnap.data() : null;\n\n      if (userData) {\n        if (userData.groupFull && userData.groupFull.date === today) {\n          setShowAuthForm(false);\n          setShowGroupFullModal(true);\n          return;\n        }\n        if (userData.dailyGroup && userData.dailyGroup.date === today) {\n          setShowAuthForm(false); \n          return; \n        }\n      }\n\n      if (isSigningUp) {\n        await setDoc(userRef, {\n          email: loggedInUser.email,\n          isProfileComplete: false,\n          username: loggedInUser.email?.split('@')[0] || `user${Date.now()}`\n        }, { merge: true });\n        const newUserSnap = await getDoc(userRef);\n        userData = newUserSnap.data() || null; \n      }\n\n      if (groupId) {\n        const status = await assignUserToGroup(loggedInUser, groupId, answers); \n        if (status === 'full') { \n          setShowAuthForm(false); \n          setShowGroupFullModal(true); \n        } else if (status === 'success') {\n          setShowAuthForm(false);\n          if (userData?.isProfileComplete) {\n            router.push(`/group/${groupId}`);\n          } else {\n            router.push(`/profile`);\n          }\n        }\n      } else {\n        router.refresh(); \n      }\n    } catch (err: any) {\n      console.error(\"Auth error:\", err);\n      if (err.code === 'auth/email-already-in-use') {\n        setAuthError('This email is already in use.');\n      } else if (err.code === 'auth/weak-password') {\n        setAuthError('Password must be at least 6 characters.');\n      } else if (err.code === 'auth/invalid-email') {\n        setAuthError('Please enter a valid email address.');\n      } else if (err.code === 'auth/invalid-credential') {\n        setAuthError('Invalid email or password.');\n      } else {\n        setAuthError('An error occurred. Please try again.');\n      }\n    }\n  };\n\n  const handleGoogleJoin = async () => {\n    setAuthError(null);\n    const provider = new GoogleAuthProvider();\n    try {\n      const result = await signInWithPopup(auth, provider);\n      const loggedInUser = result.user;\n      const today = getTodayDate();\n      const userRef = doc(db, 'users', loggedInUser.uid);\n      \n      const userSnap = await getDoc(userRef);\n      let userData = userSnap.exists() ? userSnap.data() : null;\n\n      if (!userSnap.exists()) {\n        userData = {\n          email: loggedInUser.email,\n          isProfileComplete: false,\n          username: loggedInUser.displayName || loggedInUser.email?.split('@')[0] || `user${Date.now()}`,\n          profilePictureUrl: loggedInUser.photoURL || null,\n        };\n        await setDoc(userRef, userData, { merge: true });\n      }\n\n      if (userData) {\n        if (userData.groupFull && userData.groupFull.date === today) {\n          setShowAuthForm(false);\n          setShowGroupFullModal(true);\n          return;\n        }\n        if (userData.dailyGroup && userData.dailyGroup.date === today) {\n          router.push(`/group/${userData.dailyGroup.groupId}`);\n          return;\n        }\n      }\n\n      if (groupId) {\n        const status = await assignUserToGroup(loggedInUser, groupId, answers);\n        if (status === 'full') {\n          setShowAuthForm(false);\n          setShowGroupFullModal(true);\n        } else if (status === 'success') {\n          setShowAuthForm(false);\n          if (userData?.isProfileComplete) {\n            router.push(`/group/${groupId}`);\n          } else {\n            router.push(`/profile`);\n          }\n        }\n      } else {\n        router.refresh();\n      }\n\n    } catch (err: any) {\n      console.error(\"Google join error:\", err);\n      setAuthError(\"Failed to sign in with Google.\");\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut(auth);\n    } catch (err) {\n      console.error('Failed to sign out:', err);\n      setError('Failed to sign out.');\n    }\n  };\n\n  const handleBack = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  };\n\n  const assignUserToGroup = async (\n    currentUser: User, \n    finalGroupId: string,\n    rawAnswers: { [key: number]: string }\n  ): Promise<'success' | 'full'> => {\n    if (!currentUser || !finalGroupId) return 'success';\n    const today = getTodayDate();\n    const userRef = doc(db, 'users', currentUser.uid);\n\n    try {\n      const status = await runTransaction(db, async (transaction) => {\n        const groupRef = doc(db, `daily_groups/${today}/groups`, finalGroupId);\n        const groupSnap = await transaction.get(groupRef);\n        \n        let members: string[] = [];\n        if (groupSnap.exists()) {\n          members = groupSnap.data().members || [];\n        }\n\n        if (members.length >= 10 && !members.includes(currentUser.uid)) {\n          transaction.set(userRef, {\n            groupFull: { date: today }\n          }, { merge: true });\n          return 'full';\n        }\n\n        const answersAsArray = questions.map((_, index) => rawAnswers[index]);\n        const dailyGroupData = {\n          date: today,\n          groupId: finalGroupId,\n          answers: answersAsArray\n        };\n\n        transaction.set(groupRef, {\n          members: arrayUnion(currentUser.uid)\n        }, { merge: true });\n\n        transaction.set(userRef, { \n          dailyGroup: dailyGroupData,\n          groupFull: deleteField()\n        }, { merge: true });\n        \n        return 'success';\n      });\n\n      return status;\n      \n    } catch (err) {\n      console.error('Failed to assign group with transaction:', err);\n      setError('Error joining group. Please try again.');\n      return 'success';\n    }\n  };\n\n  // --- LOADING STATE (RENDER THIS IF FETCHING) ---\n  if (isCheckingUser || isFetchingQuestions) {\n    return (\n      <main className=\"loading-container\">\n        {/* This will appear inside the fadeInPage animation */}\n        <p>Loading today's questions...</p>\n      </main>\n    );\n  }\n\n  return (\n    <main>\n      <Head>\n        <title>Brillianse - Daily Questions</title>\n      </Head>\n\n      {/* Sign In Button */}\n      {!user && !showAuthForm && (\n        <div className=\"header-actions\">\n          <button className=\"btn-sign-in-header\" onClick={() => {\n            setAuthError(null);\n            setEmail('');\n            setPassword('');\n            setShowLoginModal(true);\n            setConfirmPassword('');\n            setAuthMode('login');\n            setShowAuthForm(true);\n          }}>\n            Sign In\n          </button>\n        </div>\n      )}\n\n      {/* Post-answer Auth Form */}\n      {showAuthForm && (\n        <div className=\"auth-container\">\n          {authMode === 'signup' ? (\n            <>\n              <h2>You're in Group {groupId}!</h2>\n              <p>Sign up to see your group members.</p>\n              <div className=\"auth-form\">\n                <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" />\n                <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" />\n                <input \n                  type=\"password\" \n                  value={confirmPassword} \n                  onChange={(e) => setConfirmPassword(e.target.value)} \n                  placeholder=\"Confirm Password\" \n                />\n                <button onClick={handleGoogleJoin} className=\"btn-google\">\n                  Continue with Google\n                </button>\n                <button onClick={() => handleAuth(true)} className=\"btn-primary\">Sign Up</button>\n                {authError && <p className=\"auth-error\">{authError}</p>}\n              </div>\n              <p className=\"auth-toggle-link\">\n                Already have an account? <span onClick={() => { setAuthMode('login'); setAuthError(null); }}>Log In</span>\n              </p>\n            </>\n          ) : (\n            <>\n              <h2>Log In</h2>\n              <p>Log in to see your group members.</p>\n              <div className=\"auth-form\">\n                <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" />\n                <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" />\n                <button onClick={handleGoogleJoin} className=\"btn-google\">\n                  Continue with Google\n                </button>\n                <button onClick={() => handleAuth(false)} className=\"btn-primary\">Log In with Email</button>\n                {authError && <p className=\"auth-error\">{authError}</p>}\n              </div>\n              <p className=\"auth-toggle-link\">\n                Don't have an account? <span onClick={() => { setAuthMode('signup'); setAuthError(null); }}>Sign Up</span>\n              </p>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Group Full Modal */}\n      {showGroupFullModal && (\n        <div className=\"sign-out-modal-overlay\">\n          <div className=\"sign-out-modal-content\">\n            <h2>Group Full</h2>\n            <p>This group already has 10 members. Please check back tomorrow!</p>\n            <div className=\"modal-actions\">\n              <button onClick={handleSignOut} className=\"btn-secondary\">\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* --- MAIN CONTENT LOGIC --- */}\n      \n      {/* 1. If we have an error (e.g. no questions) */}\n      {error && (\n        <div className=\"error-container\">\n          <h2>No Questions Yet</h2>\n          <p>{error}</p>\n          {/* Optional: Add a button to manual refresh if needed */}\n          <button onClick={() => window.location.reload()} className=\"btn-secondary\" style={{marginTop: '1rem'}}>\n            Refresh\n          </button>\n        </div>\n      )}\n\n      {/* 2. If we have questions, show the quiz */}\n      {questions.length > 0 && !showAuthForm && !error && (\n        <div className=\"question-form\">\n          <div className=\"progress-indicator\">\n            <div className=\"progress-dots-container\">\n              {questions.map((_, index) => (\n                <div\n                  key={index}\n                  className={`\n                    progress-dot \n                    ${index === currentQuestionIndex ? 'active' : ''}\n                    ${index < currentQuestionIndex ? 'completed' : ''}\n                  `}\n                />\n              ))}\n            </div>\n          </div>\n\n          <div className=\"question-block\">\n            <div className=\"question-nav-header\">\n              {currentQuestionIndex > 0 && (\n                <button onClick={handleBack} className=\"btn-back-question\">\n                  <img \n                    src=\"https://firebasestorage.googleapis.com/v0/b/brillianse-801f7.firebasestorage.app/o/Arrow%203%20(1).png?alt=media&token=543fa238-2ab7-4906-b2c3-8d5610d9119c\" \n                    alt=\"Back\" \n                  />\n                </button>\n              )}\n            </div>\n            <p className=\"question-text\">\n              {questions[currentQuestionIndex]}\n            </p>\n            \n            <div className=\"button-group\">\n              <button\n                type=\"button\"\n                className={`btn-answer ${answers[currentQuestionIndex] === 'yes' ? 'selected' : ''}`}\n                onClick={() => handleAnswer(currentQuestionIndex, 'yes')}\n              >\n                Yes\n              </button>\n              <button\n                type=\"button\"\n                className={`btn-answer ${answers[currentQuestionIndex] === 'no' ? 'selected' : ''}`}\n                onClick={() => handleAnswer(currentQuestionIndex, 'no')}\n              >\n                No\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </main>\n  );\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}