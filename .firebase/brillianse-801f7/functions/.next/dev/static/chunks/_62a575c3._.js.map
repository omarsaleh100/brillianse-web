{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/omarsaleh/Desktop/python/brillianse/frontend/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\n// Read keys from the .env.local file\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\nconst storage = getStorage(app);\n\nexport { app, db, auth, storage };"],"names":[],"mappings":";;;;;;;;;;AAOU;AAPV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,qCAAqC;AACrC,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;AACtE,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/omarsaleh/Desktop/python/brillianse/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { db, auth } from '../lib/firebase';\nimport { doc, getDoc, setDoc, arrayUnion, runTransaction, deleteField } from 'firebase/firestore';\nimport {\n  onAuthStateChanged,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  User,\n  signOut\n} from 'firebase/auth';\nimport { useRouter } from 'next/navigation';\n\nfunction getTodayDate() {\n  return new Date().toISOString().split('T')[0];\n}\n\nexport default function Home() {\n  const [questions, setQuestions] = useState<string[]>([]);\n  const [answers, setAnswers] = useState<{ [key: number]: string }>({});\n  \n  const [isCheckingUser, setIsCheckingUser] = useState(true);\n  const [isFetchingQuestions, setIsFetchingQuestions] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  const [user, setUser] = useState<User | null>(null);\n  const [groupId, setGroupId] = useState<string | null>(null);\n  \n  // --- Auth State ---\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showAuthForm, setShowAuthForm] = useState(false);\n  const [authError, setAuthError] = useState<string | null>(null);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [showGroupFullModal, setShowGroupFullModal] = useState(false);\n  \n  // --- Question Flow State ---\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  \n  const router = useRouter();\n\n  const resetQuestionState = () => {\n    setAnswers({});\n    setCurrentQuestionIndex(0);\n    setGroupId(null);\n    setShowAuthForm(false);\n    setShowGroupFullModal(false);\n    setError(null);\n    setAuthError(null);\n  };\n\n  // --- 1. Listen for user auth changes ---\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      if (currentUser) {\n        setShowLoginModal(false);\n      } else {\n        resetQuestionState();\n      }\n    });\n    return () => unsubscribe();\n  }, []); \n\n  // --- 2. Check if user has already played today ---\n  // --- 2. Check if user has already played or was blocked ---\n  useEffect(() => {\n    const checkUserStatus = async () => {\n      if (!user) {\n        setIsCheckingUser(false);\n        return;\n      }\n      const userRef = doc(db, 'users', user.uid);\n      const userSnap = await getDoc(userRef);\n      const today = getTodayDate();\n\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n\n        // --- PRIORITY 1: Check if profile is incomplete ---\n        // This must be the *first* check for any logged-in user.\n        if (!userData.isProfileComplete) {\n          router.push('/profile');\n          return; // Send them to profile regardless of group status\n        }\n\n        // --- PRIORITY 2: Check if user was blocked today ---\n        if (userData.groupFull && userData.groupFull.date === today) {\n          setShowGroupFullModal(true); // Show the \"group full\" modal\n          setIsCheckingUser(false);    // Stop loading\n          return;                     // Stop processing\n        }\n        \n        // --- PRIORITY 3: Check if user is already in a group ---\n        if (userData.dailyGroup && userData.dailyGroup.date === today) {\n          router.push(`/group/${userData.dailyGroup.groupId}`);\n          return;\n        }\n      }\n    \n      setIsCheckingUser(false); \n    };\n    checkUserStatus();\n  }, [user, router]);\n\n  // --- 3. Fetch daily questions ---\n  useEffect(() => {\n    if (isCheckingUser) return;\n    const fetchQuestions = async () => {\n      try {\n        setIsFetchingQuestions(true);\n        const docRef = doc(db, 'config', 'daily');\n        const docSnap = await getDoc(docRef);\n        if (docSnap.exists()) {\n          const data = docSnap.data();\n          if (data.date === getTodayDate()) {\n            setQuestions(data.questions);\n            setCurrentQuestionIndex(0); // Start at first question\n          } else {\n            setError('tryna fix something, will be back...'); // <-- CHANGED\n          }\n        } else {\n          setError('tryna fix something, will be back...'); // <-- CHANGED\n        }\n      } catch (err) {\n        console.error(err);\n        setError('tryna fix something, will be back...'); // <-- CHANGED\n      } finally {\n        setIsFetchingQuestions(false);\n      }\n    };\n    fetchQuestions();\n  }, [isCheckingUser]);\n\n  // This hook adds/removes a class to the <body> tag to disable scrolling\n  useEffect(() => {\n    // On mount, add the class\n    document.body.classList.add('no-scroll');\n\n    // On unmount (when user navigates away), remove the class\n    return () => {\n      document.body.classList.remove('no-scroll');\n    };\n  }, []);\n\n  // --- 4. Handle Answer Selection & Flow ---\n  const handleAnswer = async (questionIndex: number, answer: string) => {\n    // 1. Save the new answer\n    const newAnswers = {\n      ...answers,\n      [questionIndex]: answer\n    };\n    setAnswers(newAnswers);\n\n    // 2. Update progress bar\n    const newProgress = ((questionIndex + 1) / questions.length) * 100;\n\n    // 3. Check if we are on the last question\n    if (questionIndex === questions.length - 1) {\n      // --- This is the end of the quiz ---\n      const finalGroupId = questions.map((_, index) => newAnswers[index] === 'yes' ? '1' : '0').join('');\n      setGroupId(finalGroupId);\n\n      if (user) {\n        // If user is logged in, attempt to assign them\n        const status = await assignUserToGroup(user, finalGroupId, newAnswers); // <-- MODIFIED\n        \n        if (status === 'full') { // <-- ADD THIS BLOCK\n          setShowGroupFullModal(true);\n        } else if (status === 'success') {\n          // Check profile complete and redirect\n          const userSnap = await getDoc(doc(db, 'users', user.uid));\n          const userData = userSnap.data();\n          setShowAuthForm(false);\n          if (userData?.isProfileComplete) {\n            router.push(`/group/${finalGroupId}`);\n          } else {\n            router.push(`/profile`);\n          }\n        }\n      } else {\n        // If user is not logged in, show the auth form\n        setShowAuthForm(true);\n      }\n    } else {\n      // --- Move to the next question ---\n      setCurrentQuestionIndex(prev => prev + 1);\n    }\n  };\n\n  // --- 5. Handle auth *after* answering ---\n  // --- 5. Handle auth *after* answering ---\n  const handleAuth = async (isSigningUp: boolean) => {\n    if (!email || !password) {\n      setAuthError('Please enter email and password.');\n      return;\n    }\n    setAuthError(null);\n    try {\n      let userCredential;\n      if (isSigningUp) {\n        userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        userCredential = await signInWithEmailAndPassword(auth, email, password);\n      }\n      \n      const loggedInUser = userCredential.user;\n      const today = getTodayDate();\n      const userRef = doc(db, 'users', loggedInUser.uid);\n      \n      // --- NEW, CRITICAL PRE-JOIN CHECK ---\n      const userSnap = await getDoc(userRef);\n      let userData = userSnap.exists() ? userSnap.data() : null;\n\n      if (userData) {\n        // 1. Check if they are already blocked for the day\n        if (userData.groupFull && userData.groupFull.date === today) {\n          console.log(\"User already marked as 'groupFull' for today. Blocking join.\");\n          setShowAuthForm(false);\n          setShowGroupFullModal(true); // Show the \"group full\" modal\n          return; // STOP HERE. Do not assign to the new group.\n        }\n        // 2. Check if they are already in a group for the day (edge case)\n        if (userData.dailyGroup && userData.dailyGroup.date === today) {\n          console.log(\"User already in a group for today. Redirecting.\");\n          setShowAuthForm(false); \n          // The onAuthStateChanged listener and useEffect 2 will handle the redirect.\n          return; \n        }\n      }\n      // --- END OF PRE-JOIN CHECK ---\n\n      // If this is a new user, create their doc stub\n      if (isSigningUp) {\n        await setDoc(userRef, {\n          email: loggedInUser.email,\n          isProfileComplete: false,\n          username: loggedInUser.email?.split('@')[0] || `user${Date.now()}`\n        }, { merge: true });\n        const newUserSnap = await getDoc(userRef);\n        userData = newUserSnap.data() || null; \n      }\n\n      // If they passed all checks, proceed with assigning them to the *new* group.\n      if (groupId) {\n        // This 'status' check is now a safety net for race conditions.\n        const status = await assignUserToGroup(loggedInUser, groupId, answers); \n\n        if (status === 'full') { \n          setShowAuthForm(false); \n          setShowGroupFullModal(true); \n        } else if (status === 'success') {\n          setShowAuthForm(false);\n          if (userData?.isProfileComplete) {\n            router.push(`/group/${groupId}`);\n          } else {\n            router.push(`/profile`);\n          }\n        }\n      } else {\n        // Should not happen in this flow, but good to have.\n        router.refresh(); \n      }\n    } catch (err: any) {\n      console.error(\"Auth error:\", err);\n      // Check for specific Firebase auth error codes\n      if (err.code === 'auth/email-already-in-use') {\n        setAuthError('This email is already in use. Please try logging in.');\n      } else if (err.code === 'auth/weak-password') {\n        setAuthError('Password is too weak. It must be at least 6 characters.');\n      } else if (err.code === 'auth/invalid-email') {\n        setAuthError('Please enter a valid email address.');\n      } else if (err.code === 'auth/invalid-credential') {\n        setAuthError('Invalid email or password. Please try again.');\n      } else {\n        // A generic fallback for other errors\n        setAuthError('An error occurred. Please try again.');\n      }\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await signOut(auth);\n      // The onAuthStateChanged listener will now handle the state reset.\n    } catch (err) {\n      console.error('Failed to sign out:', err);\n      setError('Failed to sign out. Please try again.');\n    }\n  };\n  \n  // --- 6. Handle login *before* answering ---\n  const handleLogin = async () => {\n    if (!email || !password) {\n      setAuthError('Please enter email and password.');\n      return;\n    }\n    setAuthError(null);\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      setEmail('');\n      setPassword('');\n    } catch (err: any) {\n      console.error(\"Login error:\", err);\n      if (err.code === 'auth/invalid-credential') {\n        setAuthError('Invalid email or password. Please try again.');\n      } else if (err.code === 'auth/invalid-email') {\n        setAuthError('Please enter a valid email address.');\n      } else {\n        setAuthError('An error occurred. Please try again.');\n      }\n    }\n  };\n\n  const handleBack = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1);\n    }\n  };\n\n  // --- 7. Add user to group AND save to user doc ---\n  const assignUserToGroup = async (\n    currentUser: User, \n    finalGroupId: string,\n    rawAnswers: { [key: number]: string }\n  ): Promise<'success' | 'full'> => {\n    if (!currentUser || !finalGroupId) return 'success';\n    \n    console.log(`Attempting to assign user ${currentUser.uid} to group ${finalGroupId}`);\n    const today = getTodayDate();\n    const userRef = doc(db, 'users', currentUser.uid);\n\n    try {\n      const status = await runTransaction(db, async (transaction) => {\n        const groupRef = doc(db, `daily_groups/${today}/groups`, finalGroupId);\n        const groupSnap = await transaction.get(groupRef);\n        \n        let members: string[] = [];\n        if (groupSnap.exists()) {\n          members = groupSnap.data().members || [];\n        }\n\n        if (members.length >= 10 && !members.includes(currentUser.uid)) {\n          // --- GROUP IS FULL ---\n          console.log(`Group ${finalGroupId} is full. User ${currentUser.uid} denied.`);\n          // Mark the user as \"blocked\" for the day\n          transaction.set(userRef, {\n            groupFull: { date: today }\n          }, { merge: true });\n          return 'full';\n        }\n\n        // --- GROUP HAS SPACE ---\n        const answersAsArray = questions.map((_, index) => rawAnswers[index]);\n        const dailyGroupData = {\n          date: today,\n          groupId: finalGroupId,\n          answers: answersAsArray\n        };\n\n        // Write to group\n        transaction.set(groupRef, {\n          members: arrayUnion(currentUser.uid)\n        }, { merge: true });\n\n        // Write to user (and remove any \"full\" flag)\n        transaction.set(userRef, { \n          dailyGroup: dailyGroupData,\n          groupFull: deleteField() // Clear any \"full\" flag\n        }, { merge: true });\n        \n        return 'success';\n      });\n\n      return status; // 'success' or 'full'\n      \n    } catch (err) {\n      console.error('Failed to assign group with transaction:', err);\n      setError('There was an error joining your group. Please try again.');\n      return 'success'; // Fail open\n    }\n  };\n\n  // --- MODIFIED RENDER ---\n  // We now have one main <main> return, and all other\n  // UI states are rendered conditionally *inside* it.\n  return (\n    <main>\n      <Head>\n        <title>Brillianse - Daily Questions</title>\n      </Head>\n\n      {/* --- Sign In Button in Header --- */}\n      {!user && !showAuthForm && (\n        <div className=\"header-actions\">\n          <button className=\"btn-sign-in-header\" onClick={() => {\n            setAuthError(null);\n            setEmail('');\n            setPassword('');\n            setShowLoginModal(true);\n          }}>\n            Sign In\n          </button>\n        </div>\n      )}\n\n      {/* --- Post-answer auth form --- */}\n      {showAuthForm && (\n        <div className=\"auth-container\">\n          <h2>You're in Group {groupId}!</h2>\n          <p>Sign up or log in to see your group members.</p>\n          <div className=\"auth-form\">\n            <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" />\n            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" />\n            <button onClick={() => handleAuth(true)} className=\"btn-primary\">Sign Up</button>\n            <button onClick={() => handleAuth(false)} className=\"btn-secondary\">Log In</button>\n            {authError && <p className=\"auth-error\">{authError}</p>}\n          </div>\n        </div>\n      )}\n\n      {/* --- Login-only modal --- */}\n      {showLoginModal && (\n        <div className=\"login-modal-overlay\">\n          <div className=\"login-modal-content\">\n            <h2>Sign In</h2>\n            <p>Sign in to your existing account.</p>\n            <button className=\"btn-close-modal\" onClick={() => setShowLoginModal(false)}>X</button>\n            <div className=\"auth-form\">\n              <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" />\n              <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" />\n              <button onClick={handleLogin} className=\"btn-primary\">Log In</button>\n              {authError && <p className=\"auth-error\">{authError}</p>}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* --- \"GROUP FULL\" MODAL --- */}\n      {showGroupFullModal && (\n        <div className=\"sign-out-modal-overlay\">\n          <div className=\"sign-out-modal-content\">\n            <h2>Group Full</h2>\n            <p>This group already has 10 members. Please check back tomorrow for a new set of questions!</p>\n            <div className=\"modal-actions\">\n              {/* This button just logs them out. */}\n              <button onClick={handleSignOut} className=\"btn-secondary\">\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* --- Main Question Form --- */}\n      {questions.length > 0 && !showAuthForm && (\n        <div className=\"question-form\">\n          \n          <div className=\"progress-indicator\">\n          <div className=\"progress-dots-container\">\n              {questions.map((_, index) => (\n                <div\n                  key={index}\n                  className={`\n                    progress-dot \n                    ${index === currentQuestionIndex ? 'active' : ''}\n                    ${index < currentQuestionIndex ? 'completed' : ''}\n                  `}\n                />\n              ))}\n            </div>\n          </div>\n\n          <div className=\"question-block\">\n          <div className=\"question-nav-header\">\n              {currentQuestionIndex > 0 && (\n                <button onClick={handleBack} className=\"btn-back-question\">\n                  <img \n                    src=\"https://firebasestorage.googleapis.com/v0/b/brillianse-801f7.firebasestorage.app/o/Arrow%203%20(1).png?alt=media&token=543fa238-2ab7-4906-b2c3-8d5610d9119c\" \n                    alt=\"Back\" \n                  />\n                </button>\n              )}\n            </div>\n            <p className=\"question-text\">\n              {questions[currentQuestionIndex]}\n            </p>\n            \n            <div className=\"button-group\">\n              <button\n                type=\"button\"\n                className={`btn-answer ${answers[currentQuestionIndex] === 'yes' ? 'selected' : ''}`}\n                onClick={() => handleAnswer(currentQuestionIndex, 'yes')}\n              >\n                Yes\n              </button>\n              <button\n                type=\"button\"\n                className={`btn-answer ${answers[currentQuestionIndex] === 'no' ? 'selected' : ''}`}\n                onClick={() => handleAnswer(currentQuestionIndex, 'no')}\n              >\n                No\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </main>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAOA;;;AAbA;;;;;;;AAeA,SAAS;IACP,OAAO,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAC/C;AAEe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAA4B,CAAC;IAEnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,qBAAqB;IACrB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC;IAE7D,8BAA8B;IAC9B,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,yKAAQ,EAAC;IAEjE,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,qBAAqB;QACzB,WAAW,CAAC;QACZ,wBAAwB;QACxB,WAAW;QACX,gBAAgB;QAChB,sBAAsB;QACtB,SAAS;QACT,aAAa;IACf;IAEA,0CAA0C;IAC1C,IAAA,0KAAS;0BAAC;YACR,MAAM,cAAc,IAAA,mLAAkB,EAAC,0HAAI;8CAAE,CAAC;oBAC5C,QAAQ;oBACR,IAAI,aAAa;wBACf,kBAAkB;oBACpB,OAAO;wBACL;oBACF;gBACF;;YACA;kCAAO,IAAM;;QACf;yBAAG,EAAE;IAEL,oDAAoD;IACpD,6DAA6D;IAC7D,IAAA,0KAAS;0BAAC;YACR,MAAM;kDAAkB;oBACtB,IAAI,CAAC,MAAM;wBACT,kBAAkB;wBAClB;oBACF;oBACA,MAAM,UAAU,IAAA,yKAAG,EAAC,wHAAE,EAAE,SAAS,KAAK,GAAG;oBACzC,MAAM,WAAW,MAAM,IAAA,4KAAM,EAAC;oBAC9B,MAAM,QAAQ;oBAEd,IAAI,SAAS,MAAM,IAAI;wBACrB,MAAM,WAAW,SAAS,IAAI;wBAE9B,qDAAqD;wBACrD,yDAAyD;wBACzD,IAAI,CAAC,SAAS,iBAAiB,EAAE;4BAC/B,OAAO,IAAI,CAAC;4BACZ,QAAQ,kDAAkD;wBAC5D;wBAEA,sDAAsD;wBACtD,IAAI,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,KAAK,OAAO;4BAC3D,sBAAsB,OAAO,8BAA8B;4BAC3D,kBAAkB,QAAW,eAAe;4BAC5C,QAA4B,kBAAkB;wBAChD;wBAEA,0DAA0D;wBAC1D,IAAI,SAAS,UAAU,IAAI,SAAS,UAAU,CAAC,IAAI,KAAK,OAAO;4BAC7D,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,SAAS,UAAU,CAAC,OAAO,EAAE;4BACnD;wBACF;oBACF;oBAEA,kBAAkB;gBACpB;;YACA;QACF;yBAAG;QAAC;QAAM;KAAO;IAEjB,mCAAmC;IACnC,IAAA,0KAAS;0BAAC;YACR,IAAI,gBAAgB;YACpB,MAAM;iDAAiB;oBACrB,IAAI;wBACF,uBAAuB;wBACvB,MAAM,SAAS,IAAA,yKAAG,EAAC,wHAAE,EAAE,UAAU;wBACjC,MAAM,UAAU,MAAM,IAAA,4KAAM,EAAC;wBAC7B,IAAI,QAAQ,MAAM,IAAI;4BACpB,MAAM,OAAO,QAAQ,IAAI;4BACzB,IAAI,KAAK,IAAI,KAAK,gBAAgB;gCAChC,aAAa,KAAK,SAAS;gCAC3B,wBAAwB,IAAI,0BAA0B;4BACxD,OAAO;gCACL,SAAS,yCAAyC,cAAc;4BAClE;wBACF,OAAO;4BACL,SAAS,yCAAyC,cAAc;wBAClE;oBACF,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC;wBACd,SAAS,yCAAyC,cAAc;oBAClE,SAAU;wBACR,uBAAuB;oBACzB;gBACF;;YACA;QACF;yBAAG;QAAC;KAAe;IAEnB,wEAAwE;IACxE,IAAA,0KAAS;0BAAC;YACR,0BAA0B;YAC1B,SAAS,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;YAE5B,0DAA0D;YAC1D;kCAAO;oBACL,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACjC;;QACF;yBAAG,EAAE;IAEL,4CAA4C;IAC5C,MAAM,eAAe,OAAO,eAAuB;QACjD,yBAAyB;QACzB,MAAM,aAAa;YACjB,GAAG,OAAO;YACV,CAAC,cAAc,EAAE;QACnB;QACA,WAAW;QAEX,yBAAyB;QACzB,MAAM,cAAc,AAAC,CAAC,gBAAgB,CAAC,IAAI,UAAU,MAAM,GAAI;QAE/D,0CAA0C;QAC1C,IAAI,kBAAkB,UAAU,MAAM,GAAG,GAAG;YAC1C,sCAAsC;YACtC,MAAM,eAAe,UAAU,GAAG,CAAC,CAAC,GAAG,QAAU,UAAU,CAAC,MAAM,KAAK,QAAQ,MAAM,KAAK,IAAI,CAAC;YAC/F,WAAW;YAEX,IAAI,MAAM;gBACR,+CAA+C;gBAC/C,MAAM,SAAS,MAAM,kBAAkB,MAAM,cAAc,aAAa,eAAe;gBAEvF,IAAI,WAAW,QAAQ;oBACrB,sBAAsB;gBACxB,OAAO,IAAI,WAAW,WAAW;oBAC/B,sCAAsC;oBACtC,MAAM,WAAW,MAAM,IAAA,4KAAM,EAAC,IAAA,yKAAG,EAAC,wHAAE,EAAE,SAAS,KAAK,GAAG;oBACvD,MAAM,WAAW,SAAS,IAAI;oBAC9B,gBAAgB;oBAChB,IAAI,UAAU,mBAAmB;wBAC/B,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,cAAc;oBACtC,OAAO;wBACL,OAAO,IAAI,CAAC,CAAC,QAAQ,CAAC;oBACxB;gBACF;YACF,OAAO;gBACL,+CAA+C;gBAC/C,gBAAgB;YAClB;QACF,OAAO;YACL,oCAAoC;YACpC,wBAAwB,CAAA,OAAQ,OAAO;QACzC;IACF;IAEA,2CAA2C;IAC3C,2CAA2C;IAC3C,MAAM,aAAa,OAAO;QACxB,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,aAAa;YACb;QACF;QACA,aAAa;QACb,IAAI;YACF,IAAI;YACJ,IAAI,aAAa;gBACf,iBAAiB,MAAM,IAAA,+LAA8B,EAAC,0HAAI,EAAE,OAAO;YACrE,OAAO;gBACL,iBAAiB,MAAM,IAAA,2LAA0B,EAAC,0HAAI,EAAE,OAAO;YACjE;YAEA,MAAM,eAAe,eAAe,IAAI;YACxC,MAAM,QAAQ;YACd,MAAM,UAAU,IAAA,yKAAG,EAAC,wHAAE,EAAE,SAAS,aAAa,GAAG;YAEjD,uCAAuC;YACvC,MAAM,WAAW,MAAM,IAAA,4KAAM,EAAC;YAC9B,IAAI,WAAW,SAAS,MAAM,KAAK,SAAS,IAAI,KAAK;YAErD,IAAI,UAAU;gBACZ,mDAAmD;gBACnD,IAAI,SAAS,SAAS,IAAI,SAAS,SAAS,CAAC,IAAI,KAAK,OAAO;oBAC3D,QAAQ,GAAG,CAAC;oBACZ,gBAAgB;oBAChB,sBAAsB,OAAO,8BAA8B;oBAC3D,QAAQ,6CAA6C;gBACvD;gBACA,kEAAkE;gBAClE,IAAI,SAAS,UAAU,IAAI,SAAS,UAAU,CAAC,IAAI,KAAK,OAAO;oBAC7D,QAAQ,GAAG,CAAC;oBACZ,gBAAgB;oBAChB,4EAA4E;oBAC5E;gBACF;YACF;YACA,gCAAgC;YAEhC,+CAA+C;YAC/C,IAAI,aAAa;gBACf,MAAM,IAAA,4KAAM,EAAC,SAAS;oBACpB,OAAO,aAAa,KAAK;oBACzB,mBAAmB;oBACnB,UAAU,aAAa,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;gBACpE,GAAG;oBAAE,OAAO;gBAAK;gBACjB,MAAM,cAAc,MAAM,IAAA,4KAAM,EAAC;gBACjC,WAAW,YAAY,IAAI,MAAM;YACnC;YAEA,6EAA6E;YAC7E,IAAI,SAAS;gBACX,+DAA+D;gBAC/D,MAAM,SAAS,MAAM,kBAAkB,cAAc,SAAS;gBAE9D,IAAI,WAAW,QAAQ;oBACrB,gBAAgB;oBAChB,sBAAsB;gBACxB,OAAO,IAAI,WAAW,WAAW;oBAC/B,gBAAgB;oBAChB,IAAI,UAAU,mBAAmB;wBAC/B,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,SAAS;oBACjC,OAAO;wBACL,OAAO,IAAI,CAAC,CAAC,QAAQ,CAAC;oBACxB;gBACF;YACF,OAAO;gBACL,oDAAoD;gBACpD,OAAO,OAAO;YAChB;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,eAAe;YAC7B,+CAA+C;YAC/C,IAAI,IAAI,IAAI,KAAK,6BAA6B;gBAC5C,aAAa;YACf,OAAO,IAAI,IAAI,IAAI,KAAK,sBAAsB;gBAC5C,aAAa;YACf,OAAO,IAAI,IAAI,IAAI,KAAK,sBAAsB;gBAC5C,aAAa;YACf,OAAO,IAAI,IAAI,IAAI,KAAK,2BAA2B;gBACjD,aAAa;YACf,OAAO;gBACL,sCAAsC;gBACtC,aAAa;YACf;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI;YACF,MAAM,IAAA,wKAAO,EAAC,0HAAI;QAClB,mEAAmE;QACrE,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,SAAS;QACX;IACF;IAEA,6CAA6C;IAC7C,MAAM,cAAc;QAClB,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,aAAa;YACb;QACF;QACA,aAAa;QACb,IAAI;YACF,MAAM,IAAA,2LAA0B,EAAC,0HAAI,EAAE,OAAO;YAC9C,SAAS;YACT,YAAY;QACd,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,IAAI,IAAI,IAAI,KAAK,2BAA2B;gBAC1C,aAAa;YACf,OAAO,IAAI,IAAI,IAAI,KAAK,sBAAsB;gBAC5C,aAAa;YACf,OAAO;gBACL,aAAa;YACf;QACF;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,uBAAuB,GAAG;YAC5B,wBAAwB,CAAA,OAAQ,OAAO;QACzC;IACF;IAEA,oDAAoD;IACpD,MAAM,oBAAoB,OACxB,aACA,cACA;QAEA,IAAI,CAAC,eAAe,CAAC,cAAc,OAAO;QAE1C,QAAQ,GAAG,CAAC,CAAC,0BAA0B,EAAE,YAAY,GAAG,CAAC,UAAU,EAAE,cAAc;QACnF,MAAM,QAAQ;QACd,MAAM,UAAU,IAAA,yKAAG,EAAC,wHAAE,EAAE,SAAS,YAAY,GAAG;QAEhD,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,oLAAc,EAAC,wHAAE,EAAE,OAAO;gBAC7C,MAAM,WAAW,IAAA,yKAAG,EAAC,wHAAE,EAAE,CAAC,aAAa,EAAE,MAAM,OAAO,CAAC,EAAE;gBACzD,MAAM,YAAY,MAAM,YAAY,GAAG,CAAC;gBAExC,IAAI,UAAoB,EAAE;gBAC1B,IAAI,UAAU,MAAM,IAAI;oBACtB,UAAU,UAAU,IAAI,GAAG,OAAO,IAAI,EAAE;gBAC1C;gBAEA,IAAI,QAAQ,MAAM,IAAI,MAAM,CAAC,QAAQ,QAAQ,CAAC,YAAY,GAAG,GAAG;oBAC9D,wBAAwB;oBACxB,QAAQ,GAAG,CAAC,CAAC,MAAM,EAAE,aAAa,eAAe,EAAE,YAAY,GAAG,CAAC,QAAQ,CAAC;oBAC5E,yCAAyC;oBACzC,YAAY,GAAG,CAAC,SAAS;wBACvB,WAAW;4BAAE,MAAM;wBAAM;oBAC3B,GAAG;wBAAE,OAAO;oBAAK;oBACjB,OAAO;gBACT;gBAEA,0BAA0B;gBAC1B,MAAM,iBAAiB,UAAU,GAAG,CAAC,CAAC,GAAG,QAAU,UAAU,CAAC,MAAM;gBACpE,MAAM,iBAAiB;oBACrB,MAAM;oBACN,SAAS;oBACT,SAAS;gBACX;gBAEA,iBAAiB;gBACjB,YAAY,GAAG,CAAC,UAAU;oBACxB,SAAS,IAAA,gLAAU,EAAC,YAAY,GAAG;gBACrC,GAAG;oBAAE,OAAO;gBAAK;gBAEjB,6CAA6C;gBAC7C,YAAY,GAAG,CAAC,SAAS;oBACvB,YAAY;oBACZ,WAAW,IAAA,iLAAW,IAAG,wBAAwB;gBACnD,GAAG;oBAAE,OAAO;gBAAK;gBAEjB,OAAO;YACT;YAEA,OAAO,QAAQ,sBAAsB;QAEvC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4CAA4C;YAC1D,SAAS;YACT,OAAO,WAAW,YAAY;QAChC;IACF;IAEA,0BAA0B;IAC1B,oDAAoD;IACpD,oDAAoD;IACpD,qBACE,6LAAC;;0BACC,6LAAC,kLAAI;0BACH,cAAA,6LAAC;8BAAM;;;;;;;;;;;YAIR,CAAC,QAAQ,CAAC,8BACT,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAO,WAAU;oBAAqB,SAAS;wBAC9C,aAAa;wBACb,SAAS;wBACT,YAAY;wBACZ,kBAAkB;oBACpB;8BAAG;;;;;;;;;;;YAON,8BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;4BAAG;4BAAiB;4BAAQ;;;;;;;kCAC7B,6LAAC;kCAAE;;;;;;kCACH,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,MAAK;gCAAQ,OAAO;gCAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gCAAG,aAAY;;;;;;0CACzF,6LAAC;gCAAM,MAAK;gCAAW,OAAO;gCAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAAG,aAAY;;;;;;0CAClG,6LAAC;gCAAO,SAAS,IAAM,WAAW;gCAAO,WAAU;0CAAc;;;;;;0CACjE,6LAAC;gCAAO,SAAS,IAAM,WAAW;gCAAQ,WAAU;0CAAgB;;;;;;4BACnE,2BAAa,6LAAC;gCAAE,WAAU;0CAAc;;;;;;;;;;;;;;;;;;YAM9C,gCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAG;;;;;;sCACJ,6LAAC;sCAAE;;;;;;sCACH,6LAAC;4BAAO,WAAU;4BAAkB,SAAS,IAAM,kBAAkB;sCAAQ;;;;;;sCAC7E,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAM,MAAK;oCAAQ,OAAO;oCAAO,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCAAG,aAAY;;;;;;8CACzF,6LAAC;oCAAM,MAAK;oCAAW,OAAO;oCAAU,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oCAAG,aAAY;;;;;;8CAClG,6LAAC;oCAAO,SAAS;oCAAa,WAAU;8CAAc;;;;;;gCACrD,2BAAa,6LAAC;oCAAE,WAAU;8CAAc;;;;;;;;;;;;;;;;;;;;;;;YAOhD,oCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAG;;;;;;sCACJ,6LAAC;sCAAE;;;;;;sCACH,6LAAC;4BAAI,WAAU;sCAEb,cAAA,6LAAC;gCAAO,SAAS;gCAAe,WAAU;0CAAgB;;;;;;;;;;;;;;;;;;;;;;YASjE,UAAU,MAAM,GAAG,KAAK,CAAC,8BACxB,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;kCACf,cAAA,6LAAC;4BAAI,WAAU;sCACV,UAAU,GAAG,CAAC,CAAC,GAAG,sBACjB,6LAAC;oCAEC,WAAW,CAAC;;oBAEV,EAAE,UAAU,uBAAuB,WAAW,GAAG;oBACjD,EAAE,QAAQ,uBAAuB,cAAc,GAAG;kBACpD,CAAC;mCALI;;;;;;;;;;;;;;;kCAWb,6LAAC;wBAAI,WAAU;;0CACf,6LAAC;gCAAI,WAAU;0CACV,uBAAuB,mBACtB,6LAAC;oCAAO,SAAS;oCAAY,WAAU;8CACrC,cAAA,6LAAC;wCACC,KAAI;wCACJ,KAAI;;;;;;;;;;;;;;;;0CAKZ,6LAAC;gCAAE,WAAU;0CACV,SAAS,CAAC,qBAAqB;;;;;;0CAGlC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,WAAW,CAAC,WAAW,EAAE,OAAO,CAAC,qBAAqB,KAAK,QAAQ,aAAa,IAAI;wCACpF,SAAS,IAAM,aAAa,sBAAsB;kDACnD;;;;;;kDAGD,6LAAC;wCACC,MAAK;wCACL,WAAW,CAAC,WAAW,EAAE,OAAO,CAAC,qBAAqB,KAAK,OAAO,aAAa,IAAI;wCACnF,SAAS,IAAM,aAAa,sBAAsB;kDACnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA5ewB;;QAsBP,kJAAS;;;KAtBF"}}]
}