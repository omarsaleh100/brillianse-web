{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/omarsaleh/Desktop/python/brillianse/frontend/lib/firebase.js"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\n// Read keys from the .env.local file\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\nconst db = getFirestore(app);\nconst auth = getAuth(app);\nconst storage = getStorage(app);\n\nexport { app, db, auth, storage };"],"names":[],"mappings":";;;;;;;;;;AAOU;AAPV;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,qCAAqC;AACrC,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;AACtE,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///Users/omarsaleh/Desktop/python/brillianse/frontend/app/group/%5BgroupId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport { db, auth } from '../../../lib/firebase';\nimport { doc, getDoc, DocumentData } from 'firebase/firestore';\nimport { onAuthStateChanged, User, signOut } from 'firebase/auth';\nimport { useParams, useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\nfunction getTodayDate() {\n  return new Date().toISOString().split('T')[0];\n}\n\n// --- MODIFIED: Add profilePictureUrl ---\ntype UserProfile = {\n  id: string;\n  username: string;\n  email: string;\n  profilePictureUrl?: string; // <-- NEW\n  socials: {\n    twitter?: string;\n    linkedin?: string;\n    instagram?: string;\n  };\n};\n\nconst DEFAULT_AVATAR_URL = 'https://firebasestorage.googleapis.com/v0/b/brillianse-801f7.firebasestorage.app/o/logos%2FBrillianse%20(5)%20copy.png?alt=media&token=ecffd21e-dff9-4151-b57f-5515be4c87e7';\n\nexport default function GroupPage() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [members, setMembers] = useState<UserProfile[]>([]);\n  const [showSignOutModal, setShowSignOutModal] = useState(false);\n  const [selectedMember, setSelectedMember] = useState<UserProfile | null>(null);\n  \n  const router = useRouter();\n  const params = useParams();\n  const groupId = params.groupId as string;\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      if (!currentUser) {\n        router.push('/');\n      }\n      setUser(currentUser);\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  useEffect(() => {\n    if (!groupId || !user) return;\n    const fetchGroupData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const today = getTodayDate();\n        \n        const groupRef = doc(db, `daily_groups/${today}/groups`, groupId);\n        const groupSnap = await getDoc(groupRef);\n        if (!groupSnap.exists()) {\n          throw new Error('This group does not exist or has not been formed yet.');\n        }\n\n        const memberIds: string[] = groupSnap.data().members || [];\n        const profilePromises = memberIds.map(id => \n          getDoc(doc(db, 'users', id))\n        );\n        const profileDocs = await Promise.all(profilePromises);\n\n        // --- MODIFIED: Get the profilePictureUrl ---\n        const memberProfiles = profileDocs\n          .filter(docSnap => docSnap.exists())\n          .map(docSnap => {\n            const data = docSnap.data() as DocumentData;\n            return {\n              id: docSnap.id,\n              username: data.username || 'Anonymous User',\n              email: data.email,\n              profilePictureUrl: data.profilePictureUrl || null, // <-- NEW\n              socials: data.socials || {},\n            };\n          });\n          const sortedMembers = memberProfiles.sort((a, b) => {\n            if (a.id === user.uid) return -1; // 'a' (current user) comes first\n            if (b.id === user.uid) return 1;  // 'b' (current user) comes first\n            return 0; // Otherwise, keep original order\n          });\n  \n          setMembers(sortedMembers);\n      } catch (err: any) {\n        console.error(err);\n        setError(err.message || 'Failed to load group members.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchGroupData();\n  }, [groupId, user]);\n\n  const handleSignOut = async () => {\n    setShowSignOutModal(true);\n  };\n\n  const confirmSignOut = async () => {\n    try {\n      await signOut(auth);\n      setShowSignOutModal(false); // Close modal on success\n      // Router will redirect via the onAuthStateChanged listener\n    } catch (err) {\n      console.error('Failed to sign out:', err);\n    }\n  };\n\n  if (loading) {\n    return <main className=\"loading-container\">Loading your group...</main>;\n  }\n  if (error) {\n    return <main className=\"error-container\">{error}</main>;\n  }\n\n  return (\n    <main>\n      <Head>\n        <title>Your Daily Group</title>\n      </Head>\n\n      <div className=\"header-actions\">\n        <button onClick={handleSignOut} className=\"btn-sign-in-header\">\n          Sign Out\n        </button>\n      </div>\n\n      <div className=\"group-header\">\n        <h1>Your Group: <code>{groupId}</code></h1>\n        <p>Here are the {members.length} members who answered the same as you today.</p>\n        <div className=\"header-links\">\n          <Link href=\"/profile\">Edit Your Profile</Link>\n          <Link href=\"/answers\">View My Answers</Link>\n        </div>\n      </div>\n\n      {members.length === 1 && (\n        <p className=\"group-empty-message\">\n          You're the first one here. Others are joining soon, check back later!\n        </p>\n      )}\n\n      <div className=\"member-list\">\n        {members.map(member => (\n          <div key={member.id}\n          className=\"member-circle-card\"\n            onClick={() => setSelectedMember(member)}>\n            <div className=\"member-avatar-wrapper\">\n              <img \n                src={member.profilePictureUrl || DEFAULT_AVATAR_URL} \n                alt=\"Profile\"\n                className=\"member-avatar\" // This class will be bigger\n                onError={(e) => (e.currentTarget.src = DEFAULT_AVATAR_URL)}\n              />\n              {member.id === user?.uid && (\n                <span className=\"you-tag-circle\">You</span>\n              )}\n            </div>\n            \n            <div className=\"member-info\">\n              <h3>\n                {member.username}\n              </h3>\n              \n              <div className=\"social-links\">\n                {member.socials.twitter && (\n                  <a href={`https://twitter.com/${member.socials.twitter.replace('@', '')}`} target=\"_blank\" rel=\"noopener noreferrer\">Twitter</a>\n                )}\n                {member.socials.linkedin && (\n                  <a href={member.socials.linkedin.startsWith('http') ? member.socials.linkedin : `https://${member.socials.linkedin}`} target=\"_blank\" rel=\"noopener noreferrer\">LinkedIn</a>\n                )}\n                {member.socials.instagram && (\n                 <a href={`https://instagram.com/${member.socials.instagram.replace('@', '')}`} target=\"_blank\" rel=\"noopener noreferrer\">Instagram</a>\n                )}\n                {member.id !== user?.uid && (\n                  <a href={`mailto:${member.email}`}>Email</a>\n                )}\n              </div>\n              \n              {!member.socials.twitter && !member.socials.linkedin && !member.socials.instagram && member.id !== user?.uid && (\n                <p className=\"no-socials\">This user hasn't added their socials yet.</p>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n      {showSignOutModal && (\n          <div className=\"sign-out-modal-overlay\">\n          <div className=\"sign-out-modal-content\">\n            <h2>Are you sure?</h2>\n            <p>This will sign you out of your account and return you to the daily questions.</p>\n            <div className=\"modal-actions\">\n              <button onClick={confirmSignOut} className=\"btn-danger\">\n                Sign Out\n              </button>\n              <button onClick={() => setShowSignOutModal(false)} className=\"btn-secondary\">\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      {selectedMember && (\n        <div className=\"member-modal-overlay\" onClick={() => setSelectedMember(null)}>\n          <div className=\"member-modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"member-modal-image\">\n              <img \n                src={selectedMember.profilePictureUrl || DEFAULT_AVATAR_URL}\n                alt=\"Profile\"\n                onError={(e) => (e.currentTarget.src = DEFAULT_AVATAR_URL)}\n              />\n            </div>\n            \n            <div className=\"member-modal-info\">\n              <h2>{selectedMember.username}</h2>\n              \n              {selectedMember.id === user?.uid && (\n                <span className=\"you-tag-modal\">You</span>\n              )}\n              \n              <div className=\"social-links-modal\">\n                {selectedMember.socials.twitter && (\n                  <a href={`https://twitter.com/${selectedMember.socials.twitter.replace('@', '')}`} target=\"_blank\" rel=\"noopener noreferrer\">Twitter</a>\n                )}\n                {selectedMember.socials.linkedin && (\n                  <a href={selectedMember.socials.linkedin.startsWith('http') ? selectedMember.socials.linkedin : `https://${selectedMember.socials.linkedin}`} target=\"_blank\" rel=\"noopener noreferrer\">LinkedIn</a>\n                )}\n                {selectedMember.socials.instagram && (\n                 <a href={`https://instagram.com/${selectedMember.socials.instagram.replace('@', '')}`} target=\"_blank\" rel=\"noopener noreferrer\">Instagram</a>\n                )}\n                {selectedMember.id !== user?.uid && (\n                  <a href={`mailto:${selectedMember.email}`}>Email</a>\n                )}\n              </div>\n              \n              {!selectedMember.socials.twitter && !selectedMember.socials.linkedin && !selectedMember.socials.instagram && selectedMember.id !== user?.uid && (\n                <p className=\"no-socials\">This user hasn't added their socials yet.</p>\n              )}\n            </div>\n            \n          </div>\n          <p className=\"modal-exit-text\">Press anywhere to exit enlarged view</p>\n        </div>\n      )}\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}